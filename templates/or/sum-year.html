<section
	class="content"
	ng-controller="orController"
	ng-init="getSumYear($event);"
>
	<div class="container-fluid">
		<!-- Main row -->
		<div class="row">
			<section class="col-lg-12 connectedSortable">

				<div class="card">
					<div class="card-header">
						<h3 class="card-title">
							<i class="fas fa-user-nurse mr-1"></i>
							สรุปยอดผ่าตัด
						</h3>
					</div><!-- /.card-header -->
					<div class="card-body">

						<form action="" method="POST" class="form-inline">
							<div class="form-group">
								<label>ปีงบประมาณ :</label>
								<input
									type="text"
									id="cboYear"
									name="cboYear"
									ng-model="cboYear"
									class="form-control"
									style="margin: 0 10px;"
									autocomplete="off"
								>
							</div>

							<button ng-click="getSumYear($event)" class="btn btn-primary">ตกลง</button>
					
						</form>

					</div><!-- /.card-body -->
				</div><!-- /.card -->

				<div class="card">
					<div class="card-body">

						<div class="table-responsive">
							<table class="table table-bordered table-striped">
								<thead>
									<tr style="font-size: 14px;">
										<th style="width: 3%; text-align: center;" rowspan="3">ลำดับ</th>
										<th style="width: 10%; text-align: center;" rowspan="3">วันที่</th>
										<th style="width: 7%; text-align: center;" rowspan="3">จน.ผู้ป่วย (ราย)</th>
										<th style="width: 7%; text-align: center;" colspan="16">จำนวนการให้บริการ (ครั้ง)</th>
									</tr>
									<tr style="font-size: 12px;">
										<th style="text-align: center;" colspan="3">ประเภท</th>
										<th style="text-align: center;" colspan="9">สาขา</th>
										<th style="text-align: center;" colspan="4">ช่วงเวลา</th>
									</tr>
									<tr style="font-size: 12px;">
										<th style="width: 7%; text-align: center;">Minor</th>
										<th style="width: 7%; text-align: center;">Major</th>
										<th style="width: 7%; text-align: center;">อื่นๆ</th>
										<th style="width: 7%; text-align: center;">SUR</th>
										<th style="width: 7%; text-align: center;">OBS</th>		
										<th style="width: 7%; text-align: center;">GYN</th>		
										<th style="width: 7%; text-align: center;">ENT</th>
										<th style="width: 7%; text-align: center;">EYE</th>
										<th style="width: 7%; text-align: center;">ORTHO</th>
										<th style="width: 7%; text-align: center;">NEURO</th>
										<th style="width: 7%; text-align: center;">MAXILLO</th>
										<th style="width: 7%; text-align: center;">อื่นๆ</th>
										<th style="width: 7%; text-align: center;">ดึก</th>
										<th style="width: 7%; text-align: center;">ก่อนเที่ยง</th>
										<th style="width: 7%; text-align: center;">หลังเที่ยง</th>
										<th style="width: 7%; text-align: center;">บ่าย</th>
									</tr>
								<thead>
								<tbody>
									<tr ng-repeat="(index, numday) in data">
										<td style="text-align: center;">{{ index+1 }}</td>
										<td style="text-align: center;">
											{{ numday.yymm }}
										</td>
										<td style="text-align: center;">{{ numday.num | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.miner | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.major | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.other | currency:'':0 }}</td>

										<td style="text-align: center;">{{ numday.sur | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.obs | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.gyn | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.ent | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.eye | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.ort | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.neu | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.max | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.oth | currency:'':0 }}</td>
										
										<td style="text-align: center;">{{ numday.night | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.morning | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.afternoon | currency:'':0 }}</td>
										<td style="text-align: center;">{{ numday.evening | currency:'':0 }}</td>
									</tr>
									<tr>
										<td style="text-align: center;" colspan="2">รวม</td>
										<td style="text-align: center;">{{ totalData.num | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.miner | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.major | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.other | currency:'':0 }}</td>

										<td style="text-align: center;">{{ totalData.sur | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.obs | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.gyn | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.ent | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.eye | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.ort | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.neu | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.max | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.oth | currency:'':0 }}</td>
										
										<td style="text-align: center;">{{ totalData.night | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.morning | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.afternoon | currency:'':0 }}</td>
										<td style="text-align: center;">{{ totalData.evening | currency:'':0 }}</td>
									</tr>
						
								</tbody>
							</table>
						</div><!-- /.table-responsive -->

					</div><!-- /.card-body -->
				</div><!-- /.card -->

			</section>
		</div><!-- Main row -->
	</div><!-- /.container-fluid-->
</section><!-- /.content -->

<script type="text/javascript">
	$(function() {
		$('#cboYear').datepicker({
			autoclose: true,
			format: 'yyyy',
			viewMode: "years", 
			minViewMode: "years",
			language: 'th',
			thaiyear: true
		}).datepicker('update', new Date());
	});
</script>